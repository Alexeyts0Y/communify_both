{"ast":null,"code":"var _jsxFileName = \"/home/alexey/Documents/source/java/SocialNetwork/communify_frontend/src/pages/Profile/Profile.jsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { observer } from 'mobx-react-lite';\nimport { Context } from '../../storage';\nimport ProfilePageHeader from '../../component/ProfilePageHeader/ProfilePageHeader';\nimport PostContainer from '../../component/PostContainer/PostContainer';\nimport ProfilePageSideBar from '../../component/ProfilePageSideBar/ProfilePageSideBar';\nimport classes from './Profile.module.css'; // CSS\nimport { ROUTE } from '../../utils/consts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Profile = _s(observer(_c = _s(() => {\n  _s();\n  const {\n    userStore,\n    postStore\n  } = useContext(Context);\n  const {\n    id\n  } = useParams(); // ID пользователя из URL\n\n  const profileIdToLoad = id ? Number(id) : userStore.userId; // Если нет id, это /me\n\n  useEffect(() => {\n    if (profileIdToLoad) {\n      if (profileIdToLoad === userStore.userId && userStore.user && Object.keys(userStore.user).length > 0) {\n        // Данные текущего пользователя уже есть, не перезагружаем профиль, но посты да\n      } else {\n        userStore.fetchUserProfile(profileIdToLoad);\n      }\n      postStore.fetchUserPosts(profileIdToLoad);\n    } else if (!userStore.isAuth) {\n      // Если не авторизован и пытается зайти на /me, перенаправить\n      // navigate(ROUTE.LOGIN) - но navigate тут не доступен без useNav\n    }\n  }, [profileIdToLoad, userStore, postStore, userStore.userId]);\n  const profileData = profileIdToLoad === userStore.userId ? userStore.user : userStore.currentProfile;\n  const posts = postStore.userPosts;\n  if (userStore.loading && !(profileData !== null && profileData !== void 0 && profileData.id)) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.container,\n    children: /*#__PURE__*/_jsxDEV(\"main\", {\n      children: \"Loading profile...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 90\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 55\n  }, this);\n  if (!(profileData !== null && profileData !== void 0 && profileData.id) && !userStore.loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.container,\n    children: /*#__PURE__*/_jsxDEV(\"main\", {\n      children: [\"Profile not found. \", /*#__PURE__*/_jsxDEV(Link, {\n        to: ROUTE.FEED,\n        children: \"Go to Feed\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 116\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 91\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 56\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: classes.container,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.leftPart,\n      children: [/*#__PURE__*/_jsxDEV(ProfilePageHeader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }, this), \" \", /*#__PURE__*/_jsxDEV(PostContainer, {\n        posts: posts\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.rightPart,\n      children: [/*#__PURE__*/_jsxDEV(ProfilePageSideBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 9\n  }, this);\n}, \"OlxYNGXFNHQtnOtqtjKmCzlt9EA=\", false, function () {\n  return [useParams];\n})), \"OlxYNGXFNHQtnOtqtjKmCzlt9EA=\", false, function () {\n  return [useParams];\n});\n_c2 = Profile;\nexport default Profile;\nvar _c, _c2;\n$RefreshReg$(_c, \"Profile$observer\");\n$RefreshReg$(_c2, \"Profile\");","map":{"version":3,"names":["React","useContext","useEffect","useParams","Link","observer","Context","ProfilePageHeader","PostContainer","ProfilePageSideBar","classes","ROUTE","jsxDEV","_jsxDEV","Profile","_s","_c","userStore","postStore","id","profileIdToLoad","Number","userId","user","Object","keys","length","fetchUserProfile","fetchUserPosts","isAuth","profileData","currentProfile","posts","userPosts","loading","className","container","children","fileName","_jsxFileName","lineNumber","columnNumber","to","FEED","leftPart","rightPart","_c2","$RefreshReg$"],"sources":["/home/alexey/Documents/source/java/SocialNetwork/communify_frontend/src/pages/Profile/Profile.jsx"],"sourcesContent":["import React, { useContext, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { observer } from 'mobx-react-lite';\nimport { Context } from '../../storage';\nimport ProfilePageHeader from '../../component/ProfilePageHeader/ProfilePageHeader';\nimport PostContainer from '../../component/PostContainer/PostContainer';\nimport ProfilePageSideBar from '../../component/ProfilePageSideBar/ProfilePageSideBar';\nimport classes from './Profile.module.css'; // CSS\nimport { ROUTE } from '../../utils/consts';\n\n\nconst Profile = observer(() => {\n    const { userStore, postStore } = useContext(Context);\n    const { id } = useParams(); // ID пользователя из URL\n    \n    const profileIdToLoad = id ? Number(id) : userStore.userId; // Если нет id, это /me\n\n    useEffect(() => {\n        if (profileIdToLoad) {\n            if (profileIdToLoad === userStore.userId && userStore.user && Object.keys(userStore.user).length > 0) {\n                // Данные текущего пользователя уже есть, не перезагружаем профиль, но посты да\n            } else {\n                userStore.fetchUserProfile(profileIdToLoad);\n            }\n            postStore.fetchUserPosts(profileIdToLoad);\n        } else if (!userStore.isAuth) {\n            // Если не авторизован и пытается зайти на /me, перенаправить\n             // navigate(ROUTE.LOGIN) - но navigate тут не доступен без useNav\n        }\n    }, [profileIdToLoad, userStore, postStore, userStore.userId]);\n\n\n    const profileData = (profileIdToLoad === userStore.userId) ? userStore.user : userStore.currentProfile;\n    const posts = postStore.userPosts;\n\n    if (userStore.loading && !profileData?.id) return <div className={classes.container}><main>Loading profile...</main></div>;\n    if (!profileData?.id && !userStore.loading) return <div className={classes.container}><main>Profile not found. <Link to={ROUTE.FEED}>Go to Feed</Link></main></div>;\n\n\n    return (\n        <main className={classes.container}>\n            <div className={classes.leftPart}>\n                <ProfilePageHeader /> {/* Данные возьмет из userStore.currentProfile или userStore.user */}\n                {/* Можно добавить блок для создания поста, если это свой профиль */}\n                {/* {profileIdToLoad === userStore.userId && <CreatePostInput />} */}\n                <PostContainer posts={posts} />\n            </div>\n            <div className={classes.rightPart}>\n                <ProfilePageSideBar /> {/* Данные для сайдбара также из сторов */}\n            </div>\n        </main>\n    );\n});\n\nexport default Profile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}