{"ast":null,"code":"var _jsxFileName = \"/home/alexey/Documents/source/java/SocialNetwork/communify_frontend/src/pages/ChangePassword/ChangePassword.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { observer } from 'mobx-react-lite';\nimport { Context } from '../../storage'; // Путь к вашему Context\nimport Button from '../../component/Button/Button'; // Путь к компоненту Button\nimport classes from './ChangePassword.module.css'; // Создайте этот CSS файл\nimport { ROUTE } from '../../utils/consts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChangePassword = _s(observer(_c = _s(() => {\n  _s();\n  const {\n    userStore\n  } = useContext(Context);\n  const navigate = useNavigate();\n  const [passwords, setPasswords] = useState({\n    oldPassword: '',\n    newPassword: '',\n    confirmNewPassword: ''\n  });\n  const [error, setError] = useState(''); // Локальная ошибка для валидации паролей\n\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setPasswords(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    setError(''); // Сбрасываем ошибку при изменении\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError('');\n    if (passwords.newPassword !== passwords.confirmNewPassword) {\n      setError(\"New passwords do not match.\");\n      return;\n    }\n    if (passwords.newPassword.length < 6) {\n      // Пример минимальной длины\n      setError(\"New password must be at least 6 characters long.\");\n      return;\n    }\n    const success = await userStore.changePassword(passwords.oldPassword, passwords.newPassword);\n    if (success) {\n      alert(\"Password changed successfully!\");\n      navigate('/me'); // или куда-то еще\n    } else {\n      setError(userStore.error || \"Failed to change password. Check old password.\");\n    }\n  };\n  if (!userStore.isAuth) {\n    navigate(ROUTE.LOGIN); // Если не авторизован, редирект\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.container,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: classes.title,\n      children: \"Change Password\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: classes.form,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.formGroup,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"oldPassword\",\n          className: classes.label,\n          children: \"Old Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          id: \"oldPassword\",\n          name: \"oldPassword\",\n          value: passwords.oldPassword,\n          onChange: handleChange,\n          className: classes.input,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.formGroup,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"newPassword\",\n          className: classes.label,\n          children: \"New Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          id: \"newPassword\",\n          name: \"newPassword\",\n          value: passwords.newPassword,\n          onChange: handleChange,\n          className: classes.input,\n          required: true,\n          minLength: 6\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.formGroup,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"confirmNewPassword\",\n          className: classes.label,\n          children: \"Confirm New Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          id: \"confirmNewPassword\",\n          name: \"confirmNewPassword\",\n          value: passwords.confirmNewPassword,\n          onChange: handleChange,\n          className: classes.input,\n          required: true,\n          minLength: 6\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: classes.errorText,\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 27\n      }, this), userStore.error && !error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: classes.errorText,\n        children: userStore.error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 47\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.actions,\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          disabled: userStore.loading,\n          children: userStore.loading ? 'Changing...' : 'Change Password'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          white: true,\n          type: \"button\",\n          onClick: () => navigate(-1),\n          disabled: userStore.loading,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 9\n  }, this);\n}, \"NweKMJD76OQzZpP5l9fJbfpfovQ=\", false, function () {\n  return [useNavigate];\n})), \"NweKMJD76OQzZpP5l9fJbfpfovQ=\", false, function () {\n  return [useNavigate];\n});\n_c2 = ChangePassword;\nexport default ChangePassword;\nvar _c, _c2;\n$RefreshReg$(_c, \"ChangePassword$observer\");\n$RefreshReg$(_c2, \"ChangePassword\");","map":{"version":3,"names":["React","useState","useContext","useNavigate","observer","Context","Button","classes","ROUTE","jsxDEV","_jsxDEV","ChangePassword","_s","_c","userStore","navigate","passwords","setPasswords","oldPassword","newPassword","confirmNewPassword","error","setError","handleChange","e","name","value","target","prev","handleSubmit","preventDefault","length","success","changePassword","alert","isAuth","LOGIN","className","container","children","title","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","form","formGroup","htmlFor","label","type","id","onChange","input","required","minLength","errorText","actions","disabled","loading","white","onClick","_c2","$RefreshReg$"],"sources":["/home/alexey/Documents/source/java/SocialNetwork/communify_frontend/src/pages/ChangePassword/ChangePassword.jsx"],"sourcesContent":["import React, { useState, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { observer } from 'mobx-react-lite';\nimport { Context } from '../../storage'; // Путь к вашему Context\nimport Button from '../../component/Button/Button'; // Путь к компоненту Button\nimport classes from './ChangePassword.module.css'; // Создайте этот CSS файл\nimport { ROUTE } from '../../utils/consts';\n\nconst ChangePassword = observer(() => {\n    const { userStore } = useContext(Context);\n    const navigate = useNavigate();\n\n    const [passwords, setPasswords] = useState({\n        oldPassword: '',\n        newPassword: '',\n        confirmNewPassword: '',\n    });\n    const [error, setError] = useState(''); // Локальная ошибка для валидации паролей\n\n    const handleChange = (e) => {\n        const { name, value } = e.target;\n        setPasswords(prev => ({ ...prev, [name]: value }));\n        setError(''); // Сбрасываем ошибку при изменении\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setError('');\n        if (passwords.newPassword !== passwords.confirmNewPassword) {\n            setError(\"New passwords do not match.\");\n            return;\n        }\n        if (passwords.newPassword.length < 6) { // Пример минимальной длины\n            setError(\"New password must be at least 6 characters long.\");\n            return;\n        }\n\n        const success = await userStore.changePassword(passwords.oldPassword, passwords.newPassword);\n        if (success) {\n            alert(\"Password changed successfully!\");\n            navigate('/me'); // или куда-то еще\n        } else {\n            setError(userStore.error || \"Failed to change password. Check old password.\");\n        }\n    };\n    \n    if (!userStore.isAuth) {\n        navigate(ROUTE.LOGIN); // Если не авторизован, редирект\n        return null;\n    }\n\n    return (\n        <div className={classes.container}>\n            <h1 className={classes.title}>Change Password</h1>\n            <form onSubmit={handleSubmit} className={classes.form}>\n                <div className={classes.formGroup}>\n                    <label htmlFor=\"oldPassword\" className={classes.label}>Old Password</label>\n                    <input\n                        type=\"password\"\n                        id=\"oldPassword\"\n                        name=\"oldPassword\"\n                        value={passwords.oldPassword}\n                        onChange={handleChange}\n                        className={classes.input}\n                        required\n                    />\n                </div>\n\n                <div className={classes.formGroup}>\n                    <label htmlFor=\"newPassword\" className={classes.label}>New Password</label>\n                    <input\n                        type=\"password\"\n                        id=\"newPassword\"\n                        name=\"newPassword\"\n                        value={passwords.newPassword}\n                        onChange={handleChange}\n                        className={classes.input}\n                        required\n                        minLength={6}\n                    />\n                </div>\n\n                <div className={classes.formGroup}>\n                    <label htmlFor=\"confirmNewPassword\" className={classes.label}>Confirm New Password</label>\n                    <input\n                        type=\"password\"\n                        id=\"confirmNewPassword\"\n                        name=\"confirmNewPassword\"\n                        value={passwords.confirmNewPassword}\n                        onChange={handleChange}\n                        className={classes.input}\n                        required\n                        minLength={6}\n                    />\n                </div>\n                \n                {error && <p className={classes.errorText}>{error}</p>}\n                {userStore.error && !error && <p className={classes.errorText}>{userStore.error}</p>}\n\n\n                <div className={classes.actions}>\n                    <Button type=\"submit\" disabled={userStore.loading}>\n                        {userStore.loading ? 'Changing...' : 'Change Password'}\n                    </Button>\n                    <Button white type=\"button\" onClick={() => navigate(-1)} disabled={userStore.loading}>\n                        Cancel\n                    </Button>\n                </div>\n            </form>\n        </div>\n    );\n});\n\nexport default ChangePassword;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}