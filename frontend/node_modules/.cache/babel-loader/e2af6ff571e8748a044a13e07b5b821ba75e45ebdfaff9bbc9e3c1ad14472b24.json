{"ast":null,"code":"var _jsxFileName = \"/home/alexey/Documents/source/java/SocialNetwork/communify_frontend/src/pages/Profile/Profile.jsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect } from 'react';\nimport // useNavigate уже есть\n{ useParams, Link, useNavigate } from 'react-router-dom';\nimport { observer } from 'mobx-react-lite';\nimport { Context } from '../../storage';\nimport ProfilePageHeader from '../../component/ProfilePageHeader/ProfilePageHeader';\nimport PostContainer from '../../component/PostContainer/PostContainer';\nimport ProfilePageSideBar from '../../component/ProfilePageSideBar/ProfilePageSideBar';\nimport Button from '../../component/Button/Button'; // Импортируем Button\nimport classes from './Profile.module.css';\nimport { ROUTE } from '../../utils/consts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Profile = _s(observer(_c = _s(() => {\n  _s();\n  const {\n    userStore\n  } = useContext(Context);\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const profileIdToLoad = id ? Number(id) : userStore.userId;\n  const isMyProfile = userStore.userId === profileIdToLoad;\n  useEffect(() => {\n    const loadProfile = async () => {\n      if (profileIdToLoad) {\n        try {\n          await userStore.fetchUserProfile(profileIdToLoad);\n        } catch (error) {\n          console.error(\"Failed to load profile in component:\", error);\n        }\n      } else if (!userStore.isAuth) {\n        navigate(ROUTE.LOGIN);\n      }\n    };\n    loadProfile();\n    return () => {\n      if (userStore.currentProfile && userStore.currentProfile.id === profileIdToLoad && profileIdToLoad !== userStore.userId) {\n        userStore.setCurrentProfile(null);\n      }\n    };\n  }, [profileIdToLoad, userStore, navigate]);\n  const profileData = isMyProfile ? userStore.user : userStore.currentProfile;\n  const posts = (profileData === null || profileData === void 0 ? void 0 : profileData.posts) || [];\n  if (userStore.loading && (!profileData || profileData.id !== profileIdToLoad)) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.container,\n      children: /*#__PURE__*/_jsxDEV(\"main\", {\n        children: \"Loading profile...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 49\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 14\n    }, this);\n  }\n  if (!(profileData !== null && profileData !== void 0 && profileData.id) && !userStore.loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.container,\n      children: /*#__PURE__*/_jsxDEV(\"main\", {\n        children: [\"Profile not found. \", /*#__PURE__*/_jsxDEV(Link, {\n          to: ROUTE.FEED,\n          children: \"Go to Feed\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 74\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 49\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 14\n    }, this);\n  }\n  // Убрал это условие, т.к. оно могло мешать отображению при медленной загрузке или если currentProfile еще не равен profileIdToLoad\n  // if (profileData?.id !== profileIdToLoad && !userStore.loading && id) { \n  //     return <div className={classes.container}><main>Profile not available. <Link to={ROUTE.FEED}>Go to Feed</Link></main></div>;\n  // }\n\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: classes.container,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.leftPart,\n      children: [/*#__PURE__*/_jsxDEV(ProfilePageHeader, {\n        profileData: profileData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), isMyProfile && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.createPostButtonContainer,\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: ROUTE.POST_CREATE,\n          state: {\n            fromProfileId: profileIdToLoad\n          },\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            children: \"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043F\\u043E\\u0441\\u0442\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(PostContainer, {\n        posts: posts\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.rightPart,\n      children: /*#__PURE__*/_jsxDEV(ProfilePageSideBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 9\n  }, this);\n}, \"pD7bgFrPBwg7Qa2aMP0eO3syu7A=\", false, function () {\n  return [useParams, useNavigate];\n})), \"pD7bgFrPBwg7Qa2aMP0eO3syu7A=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c2 = Profile;\nexport default Profile;\nvar _c, _c2;\n$RefreshReg$(_c, \"Profile$observer\");\n$RefreshReg$(_c2, \"Profile\");","map":{"version":3,"names":["React","useContext","useEffect","useParams","Link","useNavigate","observer","Context","ProfilePageHeader","PostContainer","ProfilePageSideBar","Button","classes","ROUTE","jsxDEV","_jsxDEV","Profile","_s","_c","userStore","id","navigate","profileIdToLoad","Number","userId","isMyProfile","loadProfile","fetchUserProfile","error","console","isAuth","LOGIN","currentProfile","setCurrentProfile","profileData","user","posts","loading","className","container","children","fileName","_jsxFileName","lineNumber","columnNumber","to","FEED","leftPart","createPostButtonContainer","POST_CREATE","state","fromProfileId","rightPart","_c2","$RefreshReg$"],"sources":["/home/alexey/Documents/source/java/SocialNetwork/communify_frontend/src/pages/Profile/Profile.jsx"],"sourcesContent":["import React, { useContext, useEffect } from 'react';\nimport { useParams, Link, useNavigate } // useNavigate уже есть\nfrom 'react-router-dom';\nimport { observer } from 'mobx-react-lite';\nimport { Context } from '../../storage';\nimport ProfilePageHeader from '../../component/ProfilePageHeader/ProfilePageHeader';\nimport PostContainer from '../../component/PostContainer/PostContainer';\nimport ProfilePageSideBar from '../../component/ProfilePageSideBar/ProfilePageSideBar';\nimport Button from '../../component/Button/Button'; // Импортируем Button\nimport classes from './Profile.module.css';\nimport { ROUTE } from '../../utils/consts';\n\nconst Profile = observer(() => {\n    const { userStore } = useContext(Context);\n    const { id } = useParams();\n    const navigate = useNavigate();\n\n    const profileIdToLoad = id ? Number(id) : userStore.userId;\n    const isMyProfile = userStore.userId === profileIdToLoad;\n\n    useEffect(() => {\n        const loadProfile = async () => {\n            if (profileIdToLoad) {\n                try {\n                    await userStore.fetchUserProfile(profileIdToLoad);\n                } catch (error) {\n                    console.error(\"Failed to load profile in component:\", error);\n                }\n            } else if (!userStore.isAuth) {\n                navigate(ROUTE.LOGIN);\n            }\n        };\n\n        loadProfile();\n\n        return () => {\n            if (userStore.currentProfile && userStore.currentProfile.id === profileIdToLoad && profileIdToLoad !== userStore.userId) {\n                userStore.setCurrentProfile(null);\n            }\n        };\n\n    }, [profileIdToLoad, userStore, navigate]);\n\n    const profileData = isMyProfile ? userStore.user : userStore.currentProfile;\n    const posts = profileData?.posts || [];\n\n    if (userStore.loading && (!profileData || profileData.id !== profileIdToLoad)) {\n      return <div className={classes.container}><main>Loading profile...</main></div>;\n    }\n    if (!profileData?.id && !userStore.loading) {\n      return <div className={classes.container}><main>Profile not found. <Link to={ROUTE.FEED}>Go to Feed</Link></main></div>;\n    }\n    // Убрал это условие, т.к. оно могло мешать отображению при медленной загрузке или если currentProfile еще не равен profileIdToLoad\n    // if (profileData?.id !== profileIdToLoad && !userStore.loading && id) { \n    //     return <div className={classes.container}><main>Profile not available. <Link to={ROUTE.FEED}>Go to Feed</Link></main></div>;\n    // }\n\n\n    return (\n        <main className={classes.container}>\n            <div className={classes.leftPart}>\n                <ProfilePageHeader profileData={profileData} />\n                {isMyProfile && (\n                    <div className={classes.createPostButtonContainer}>\n                        <Link to={ROUTE.POST_CREATE} state={{ fromProfileId: profileIdToLoad }}>\n                            <Button>Создать пост</Button>\n                        </Link>\n                    </div>\n                )}\n                <PostContainer posts={posts} />\n            </div>\n            <div className={classes.rightPart}>\n                <ProfilePageSideBar />\n            </div>\n        </main>\n    );\n});\n\nexport default Profile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}