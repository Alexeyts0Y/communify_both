{"ast":null,"code":"var _jsxFileName = \"/home/alexey/Documents/source/java/SocialNetwork/communify_frontend/src/pages/Profile/Profile.jsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect } from 'react';\nimport { useParams, Link, useNavigate } from 'react-router-dom'; // Added useNavigate\nimport { observer } from 'mobx-react-lite';\nimport { Context } from '../../storage';\nimport ProfilePageHeader from '../../component/ProfilePageHeader/ProfilePageHeader';\nimport PostContainer from '../../component/PostContainer/PostContainer';\nimport ProfilePageSideBar from '../../component/ProfilePageSideBar/ProfilePageSideBar';\nimport classes from './Profile.module.css';\nimport { ROUTE } from '../../utils/consts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Profile = _s(observer(_c = _s(() => {\n  _s();\n  const {\n    userStore\n  } = useContext(Context);\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const profileIdToLoad = id ? Number(id) : userStore.userId;\n  useEffect(() => {\n    const loadProfile = async () => {\n      if (profileIdToLoad) {\n        try {\n          await userStore.fetchUserProfile(profileIdToLoad);\n        } catch (error) {\n          console.error(\"Failed to load profile in component:\", error);\n        }\n      } else if (!userStore.isAuth) {\n        navigate(ROUTE.LOGIN);\n      }\n    };\n    loadProfile();\n    return () => {\n      if (userStore.currentProfile && userStore.currentProfile.id === profileIdToLoad && profileIdToLoad !== userStore.userId) {\n        userStore.setCurrentProfile(null);\n      }\n    };\n  }, [profileIdToLoad, userStore, navigate]);\n  const profileData = profileIdToLoad === userStore.userId ? userStore.user : userStore.currentProfile;\n  const posts = (profileData === null || profileData === void 0 ? void 0 : profileData.posts) || [];\n  if (userStore.loading && (!profileData || profileData.id !== profileIdToLoad)) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.container,\n      children: /*#__PURE__*/_jsxDEV(\"main\", {\n        children: \"Loading profile...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 49\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 14\n    }, this);\n  }\n  if (!(profileData !== null && profileData !== void 0 && profileData.id) && !userStore.loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.container,\n      children: /*#__PURE__*/_jsxDEV(\"main\", {\n        children: [\"Profile not found. \", /*#__PURE__*/_jsxDEV(Link, {\n          to: ROUTE.FEED,\n          children: \"Go to Feed\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 74\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 49\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 14\n    }, this);\n  }\n  if ((profileData === null || profileData === void 0 ? void 0 : profileData.id) !== profileIdToLoad && !userStore.loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.container,\n      children: /*#__PURE__*/_jsxDEV(\"main\", {\n        children: [\"Profile not available. \", /*#__PURE__*/_jsxDEV(Link, {\n          to: ROUTE.FEED,\n          children: \"Go to Feed\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 80\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 51\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: classes.container,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.leftPart,\n      children: [/*#__PURE__*/_jsxDEV(ProfilePageHeader, {\n        profileData: profileData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(PostContainer, {\n        posts: posts\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.rightPart,\n      children: /*#__PURE__*/_jsxDEV(ProfilePageSideBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n}, \"pD7bgFrPBwg7Qa2aMP0eO3syu7A=\", false, function () {\n  return [useParams, useNavigate];\n})), \"pD7bgFrPBwg7Qa2aMP0eO3syu7A=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c2 = Profile;\nexport default Profile;\nvar _c, _c2;\n$RefreshReg$(_c, \"Profile$observer\");\n$RefreshReg$(_c2, \"Profile\");","map":{"version":3,"names":["React","useContext","useEffect","useParams","Link","useNavigate","observer","Context","ProfilePageHeader","PostContainer","ProfilePageSideBar","classes","ROUTE","jsxDEV","_jsxDEV","Profile","_s","_c","userStore","id","navigate","profileIdToLoad","Number","userId","loadProfile","fetchUserProfile","error","console","isAuth","LOGIN","currentProfile","setCurrentProfile","profileData","user","posts","loading","className","container","children","fileName","_jsxFileName","lineNumber","columnNumber","to","FEED","leftPart","rightPart","_c2","$RefreshReg$"],"sources":["/home/alexey/Documents/source/java/SocialNetwork/communify_frontend/src/pages/Profile/Profile.jsx"],"sourcesContent":["import React, { useContext, useEffect } from 'react';\nimport { useParams, Link, useNavigate } from 'react-router-dom'; // Added useNavigate\nimport { observer } from 'mobx-react-lite';\nimport { Context } from '../../storage';\nimport ProfilePageHeader from '../../component/ProfilePageHeader/ProfilePageHeader';\nimport PostContainer from '../../component/PostContainer/PostContainer';\nimport ProfilePageSideBar from '../../component/ProfilePageSideBar/ProfilePageSideBar';\nimport classes from './Profile.module.css';\nimport { ROUTE } from '../../utils/consts';\n\nconst Profile = observer(() => {\n    const { userStore } = useContext(Context);\n    const { id } = useParams();\n    const navigate = useNavigate();\n\n    const profileIdToLoad = id ? Number(id) : userStore.userId;\n\n    useEffect(() => {\n        const loadProfile = async () => {\n            if (profileIdToLoad) {\n                try {\n                    await userStore.fetchUserProfile(profileIdToLoad);\n                } catch (error) {\n                    console.error(\"Failed to load profile in component:\", error);\n                }\n            } else if (!userStore.isAuth) {\n                navigate(ROUTE.LOGIN);\n            }\n        };\n\n        loadProfile();\n\n        return () => {\n            if (userStore.currentProfile && userStore.currentProfile.id === profileIdToLoad && profileIdToLoad !== userStore.userId) {\n                userStore.setCurrentProfile(null);\n            }\n        };\n\n    }, [profileIdToLoad, userStore, navigate]);\n\n    const profileData = (profileIdToLoad === userStore.userId) ? userStore.user : userStore.currentProfile;\n\n    const posts = profileData?.posts || [];\n\n    if (userStore.loading && (!profileData || profileData.id !== profileIdToLoad)) {\n      return <div className={classes.container}><main>Loading profile...</main></div>;\n    }\n    if (!profileData?.id && !userStore.loading) {\n      return <div className={classes.container}><main>Profile not found. <Link to={ROUTE.FEED}>Go to Feed</Link></main></div>;\n    }\n    if (profileData?.id !== profileIdToLoad && !userStore.loading) {\n\n        return <div className={classes.container}><main>Profile not available. <Link to={ROUTE.FEED}>Go to Feed</Link></main></div>;\n    }\n\n\n    return (\n        <main className={classes.container}>\n            <div className={classes.leftPart}>\n\n                <ProfilePageHeader profileData={profileData} />\n                <PostContainer posts={posts} />\n            </div>\n            <div className={classes.rightPart}>\n                <ProfilePageSideBar />\n            </div>\n        </main>\n    );\n});\n\nexport default Profile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}